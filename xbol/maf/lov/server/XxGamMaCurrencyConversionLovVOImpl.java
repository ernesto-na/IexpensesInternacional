package xxgam.oracle.apps.xbol.maf.lov.server;

import oracle.apps.fnd.framework.server.OAViewObjectImpl;

import oracle.jbo.ViewCriteria;
import oracle.jbo.ViewCriteriaRow;
import oracle.jbo.domain.Date;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class XxGamMaCurrencyConversionLovVOImpl extends OAViewObjectImpl {
    /**This is the default constructor (do not remove)
     */
    public XxGamMaCurrencyConversionLovVOImpl() {
    }

    /**
     * Busca los datos para la conversion de divisas
     * @param fromCurrency contiene la divisa origen
     * @param toCurrency contiene la divisa destino
     */
    public void searchCurrencyConversion(String fromCurrency, String toCurrency){
        
        setSearchCurrencyConversionVc(fromCurrency, toCurrency);
        executeQuery();
        clearViewCriterias();
    }

    /**
     * Asigna los criterios de busqueda
     * @param fromCurrency contiene la divisa origen
     * @param toCurrency contiene la divisa destino
     */
    public void setSearchCurrencyConversionVc(String fromCurrency, String toCurrency){
        
        //Declaraci√≥n de los recursos
        ViewCriteria vc = null;
        ViewCriteriaRow vcRow = null;

        //Crea el view criteria
        vc = createViewCriteria();
        vcRow = vc.createViewCriteriaRow();
        
        //Inicializa los criterios de busqueda
        if(fromCurrency != null){
            vcRow.setAttribute("FromCurrency", fromCurrency);    
        }
        
        if(toCurrency != null){
            vcRow.setAttribute("ToCurrency", toCurrency);
        }
        
        try {
            //Inicializa el criteria y lo aplica
            vc.addElement(vcRow);
            applyViewCriteria(vc);
        } catch (Exception exception) {
            //Propaga la excepcion
            exception.printStackTrace();
        }
    }
    
    /**
     * Construye la clausula where.
     *
     * @param dDate Fecha.
     * @return clausula where.
     */
    private String getClausuleWhereDate(Date dDate) {

        if (dDate == null)
            return null;

        //Construye la clausula where
        String sClausulePart1 = null;
        String sClausulePart2 = null;
        String sClausuleWhere = null;
        sClausulePart1 = "TO_CHAR(to_DATE('";
        sClausulePart2 = "','yyyy-mm-dd'),'yyyy-mm-dd')";


        //Construye la clausula y la regresa
        sClausuleWhere = sClausulePart1 + dDate + sClausulePart2;
        return sClausuleWhere;
    }
}
